# H·ªá Th·ªëng Qu·∫£n L√Ω Nh·∫Øc Nh·ªü v√† T√†i Kho·∫£n D√πng Chung

## T·ªïng Quan

H·ªá th·ªëng n√†y bao g·ªìm hai ph·∫ßn ch√≠nh:

1. **Qu·∫£n l√Ω nh·∫Øc nh·ªü kh√°ch h√†ng s·∫Øp h·∫øt h·∫°n**: Theo d√µi v√† qu·∫£n l√Ω vi·ªác nh·∫Øc nh·ªü kh√°ch h√†ng c√≥ d·ªãch v·ª• s·∫Øp h·∫øt h·∫°n
2. **Qu·∫£n l√Ω t√†i kho·∫£n d√πng chung**: Theo d√µi v√† ki·ªÉm so√°t c√°c t√†i kho·∫£n d·ªãch v·ª• ƒë∆∞·ª£c s·ª≠ d·ª•ng b·ªüi nhi·ªÅu kh√°ch h√†ng

### C√°c t√≠nh nƒÉng ch√≠nh:

**Ph·∫ßn Nh·∫Øc Nh·ªü:**

-   **ƒê√°nh d·∫•u tr·∫°ng th√°i nh·∫Øc nh·ªü**: Theo d√µi ai ƒë√£ ƒë∆∞·ª£c nh·∫Øc v√† ai ch∆∞a
-   **Giao di·ªán web tr·ª±c quan**: Qu·∫£n l√Ω tr·ª±c ti·∫øp t·ª´ trang admin
-   **Th·ªëng k√™ chi ti·∫øt**: B√°o c√°o t·ªïng quan v·ªÅ t√¨nh tr·∫°ng nh·∫Øc nh·ªü
-   **Qu·∫£n l√Ω linh ho·∫°t**: C√≥ th·ªÉ reset, backup v√† restore d·ªØ li·ªáu
-   **Ghi ch√∫ nh·∫Øc nh·ªü**: L∆∞u l·∫°i l·ªãch s·ª≠ v√† ghi ch√∫ cho m·ªói l·∫ßn nh·∫Øc

**Ph·∫ßn T√†i Kho·∫£n D√πng Chung:**

-   **Theo d√µi t√†i kho·∫£n ƒëa ng∆∞·ªùi d√πng**: Ph√°t hi·ªán email ƒë∆∞·ª£c s·ª≠ d·ª•ng b·ªüi nhi·ªÅu kh√°ch h√†ng
-   **C·∫£nh b√°o xung ƒë·ªôt**: C·∫£nh b√°o khi c√≥ r·ªßi ro xung ƒë·ªôt t√†i kho·∫£n
-   **B√°o c√°o chi ti·∫øt**: Th·ªëng k√™ top t√†i kho·∫£n d√πng chung v√† m·ª©c ƒë·ªô r·ªßi ro
-   **Qu·∫£n l√Ω m·∫≠t kh·∫©u**: Hi·ªÉn th·ªã/·∫©n m·∫≠t kh·∫©u an to√†n
-   **Ph√¢n t√≠ch xu h∆∞·ªõng**: Bi·ªÉu ƒë·ªì v√† th·ªëng k√™ tr·ª±c quan

## Giao Di·ªán Web

### 1. Trang Qu·∫£n L√Ω D·ªãch V·ª• Kh√°ch H√†ng

**ƒê∆∞·ªùng d·∫´n:** `/admin/customer-services`

**T√≠nh nƒÉng m·ªõi:**

-   **S·∫Øp x·∫øp th√¥ng minh**:

    -   D·ªãch v·ª• s·∫Øp h·∫øt h·∫°n ƒë∆∞·ª£c ∆∞u ti√™n l√™n ƒë·∫ßu
    -   Trong c√πng nh√≥m s·∫Øp h·∫øt h·∫°n: g·∫ßn h·∫øt h·∫°n nh·∫•t l√™n tr∆∞·ªõc
    -   Ch∆∞a ƒë∆∞·ª£c nh·∫Øc nh·ªü s·∫Ω l√™n tr∆∞·ªõc ƒë√£ nh·∫Øc

-   **C·∫£nh b√°o tr·ª±c quan**:

    -   üö® **D√≤ng ƒë·ªè**: D·ªãch v·ª• h·∫øt h·∫°n trong 0-1 ng√†y (C·∫§P B√ÅC!)
    -   ‚ö†Ô∏è **D√≤ng v√†ng**: D·ªãch v·ª• h·∫øt h·∫°n trong 2 ng√†y
    -   üìã **Th√¥ng b√°o ƒë·∫ßu trang**: Hi·ªÉn th·ªã s·ªë l∆∞·ª£ng d·ªãch v·ª• c·∫•p b√°ch

-   **C·ªôt "Nh·∫Øc nh·ªü"**: Hi·ªÉn th·ªã tr·∫°ng th√°i nh·∫Øc nh·ªü cho t·ª´ng d·ªãch v·ª•

    -   ‚úÖ **ƒê√£ nh·∫Øc**: S·ªë l·∫ßn nh·∫Øc + th·ªùi gian nh·∫Øc g·∫ßn nh·∫•t
    -   ‚ö†Ô∏è **C·∫ßn nh·∫Øc l·∫°i**: Hi·ªÉn th·ªã khi ƒë√£ nh·∫Øc nh∆∞ng c·∫ßn nh·∫Øc l·∫°i sau 24h
    -   ‚ùå **Ch∆∞a nh·∫Øc**: ƒê·ªëi v·ªõi d·ªãch v·ª• s·∫Øp h·∫øt h·∫°n ch∆∞a ƒë∆∞·ª£c nh·∫Øc

-   **N√∫t thao t√°c m·ªõi:**
    -   üîî **ƒê√°nh d·∫•u nh·∫Øc nh·ªü**: Cho d·ªãch v·ª• s·∫Øp h·∫øt h·∫°n ch∆∞a ƒë∆∞·ª£c nh·∫Øc
    -   ‚Ü©Ô∏è **Reset nh·∫Øc nh·ªü**: Reset tr·∫°ng th√°i nh·∫Øc nh·ªü

### 2. Trang B√°o C√°o Nh·∫Øc Nh·ªü

**ƒê∆∞·ªùng d·∫´n:** `/admin/customer-services-reminder-report`

**T√≠nh nƒÉng:**

-   **Th·ªëng k√™ t·ªïng quan**:

    -   T·ªïng s·ªë d·ªãch v·ª• s·∫Øp h·∫øt h·∫°n
    -   S·ªë l∆∞·ª£ng ƒë√£/ch∆∞a nh·∫Øc nh·ªü
    -   T·ª∑ l·ªá % ƒë√£ nh·∫Øc nh·ªü

-   **B·ªô l·ªçc th·ªùi gian**: 3, 5, 7, 10 ng√†y t·ªõi

-   **Danh s√°ch chi ti·∫øt:**

    -   **C·∫ßn nh·∫Øc nh·ªü**: Danh s√°ch d·ªãch v·ª• ch∆∞a ƒë∆∞·ª£c nh·∫Øc
    -   **ƒê√£ nh·∫Øc nh·ªü**: Danh s√°ch d·ªãch v·ª• ƒë√£ ƒë∆∞·ª£c nh·∫Øc v·ªõi tr·∫°ng th√°i

-   **Thao t√°c h√†ng lo·∫°t:**
    -   Ch·ªçn nhi·ªÅu d·ªãch v·ª• v√† ƒë√°nh d·∫•u c√πng l√∫c
    -   ƒê√°nh d·∫•u t·∫•t c·∫£ ch∆∞a ƒë∆∞·ª£c nh·∫Øc

### 3. B√°o C√°o Th·ªëng K√™ H√†ng Ng√†y

**ƒê∆∞·ªùng d·∫´n:** `/admin/customer-services-daily-report`

**T√≠nh nƒÉng:**

-   **Th·ªëng k√™ t·ªïng quan theo ng√†y:**

    -   S·ªë d·ªãch v·ª• k√≠ch ho·∫°t + doanh thu ∆∞·ªõc t√≠nh
    -   S·ªë d·ªãch v·ª• h·∫øt h·∫°n (c·∫ßn gia h·∫°n)
    -   S·ªë d·ªãch v·ª• s·∫Øp h·∫øt h·∫°n trong 5 ng√†y

-   **Chi ti·∫øt d·ªãch v·ª• k√≠ch ho·∫°t:**

    -   Danh s√°ch kh√°ch h√†ng k√≠ch ho·∫°t d·ªãch v·ª•
    -   Top g√≥i d·ªãch v·ª• ph·ªï bi·∫øn
    -   Doanh thu theo t·ª´ng g√≥i

-   **Chi ti·∫øt d·ªãch v·ª• h·∫øt h·∫°n:**

    -   Danh s√°ch kh√°ch h√†ng c·∫ßn li√™n h·ªá gia h·∫°n
    -   Th√¥ng tin li√™n h·ªá v√† thao t√°c nhanh

-   **B·ªô l·ªçc ng√†y:** C√≥ th·ªÉ xem b√°o c√°o cho b·∫•t k·ª≥ ng√†y n√†o

### 4. N√∫t Truy C·∫≠p Nhanh

-   **T·ª´ Dashboard**: Truy c·∫≠p nhanh t·ªõi d·ªãch v·ª• s·∫Øp h·∫øt h·∫°n
-   **T·ª´ menu**: Menu "D·ªãch v·ª• kh√°ch h√†ng"
    -   "B√°o c√°o h√†ng ng√†y" - Xem th·ªëng k√™ t·ªïng quan
    -   "B√°o c√°o nh·∫Øc nh·ªü" - Qu·∫£n l√Ω nh·∫Øc nh·ªü

### 5. B·ªô L·ªçc N√¢ng Cao

**Tr·∫°ng th√°i d·ªãch v·ª•:**

-   ƒêang ho·∫°t ƒë·ªông, S·∫Øp h·∫øt h·∫°n, ƒê√£ h·∫øt h·∫°n

**Nh·∫Øc nh·ªü:**

-   S·∫Øp h·∫øt h·∫°n - Ch∆∞a nh·∫Øc
-   ƒê√£ ƒë∆∞·ª£c nh·∫Øc nh·ªü

**Ng√†y k√≠ch ho·∫°t:**

-   üéØ **K√≠ch ho·∫°t h√¥m nay** - Xem kh√°ch h√†ng m·ªõi + th·ªëng k√™
-   K√≠ch ho·∫°t h√¥m qua
-   K√≠ch ho·∫°t tu·∫ßn n√†y
-   K√≠ch ho·∫°t th√°ng n√†y

## Quy Tr√¨nh S·ª≠ D·ª•ng H√†ng Ng√†y

### 1. Ki·ªÉm Tra Doanh S·ªë H√¥m Nay

```
1. V√†o "D·ªãch v·ª• kh√°ch h√†ng" ‚Üí Filter "üéØ K√≠ch ho·∫°t h√¥m nay"
2. Xem th·ªëng k√™: T·ªïng d·ªãch v·ª•, kh√°ch h√†ng, doanh thu
3. Ho·∫∑c v√†o "B√°o c√°o h√†ng ng√†y" ƒë·ªÉ xem chi ti·∫øt ƒë·∫ßy ƒë·ªß
```

### 2. Qu·∫£n L√Ω Nh·∫Øc Nh·ªü

```
1. V√†o "B√°o c√°o nh·∫Øc nh·ªü"
2. Xem danh s√°ch ch∆∞a ƒë∆∞·ª£c nh·∫Øc
3. ƒê√°nh d·∫•u h√†ng lo·∫°t ho·∫∑c t·ª´ng kh√°ch
```

### 3. Theo D√µi H·∫øt H·∫°n

```
1. V√†o "B√°o c√°o h√†ng ng√†y"
2. Xem m·ª•c "D·ªãch v·ª• h·∫øt h·∫°n h√¥m nay"
3. Li√™n h·ªá kh√°ch h√†ng gia h·∫°n
```

## T·ªïng Quan

H·ªá th·ªëng n√†y cho ph√©p b·∫°n theo d√µi v√† qu·∫£n l√Ω vi·ªác nh·∫Øc nh·ªü kh√°ch h√†ng c√≥ d·ªãch v·ª• s·∫Øp h·∫øt h·∫°n. Bao g·ªìm:

-   **ƒê√°nh d·∫•u tr·∫°ng th√°i nh·∫Øc nh·ªü**: Theo d√µi ai ƒë√£ ƒë∆∞·ª£c nh·∫Øc v√† ai ch∆∞a
-   **Th·ªëng k√™ chi ti·∫øt**: B√°o c√°o t·ªïng quan v·ªÅ t√¨nh tr·∫°ng nh·∫Øc nh·ªü
-   **Qu·∫£n l√Ω linh ho·∫°t**: C√≥ th·ªÉ reset, backup v√† restore d·ªØ li·ªáu
-   **Ghi ch√∫ nh·∫Øc nh·ªü**: L∆∞u l·∫°i l·ªãch s·ª≠ v√† ghi ch√∫ cho m·ªói l·∫ßn nh·∫Øc

## C√°c Tr∆∞·ªùng D·ªØ Li·ªáu M·ªõi

ƒê√£ th√™m v√†o b·∫£ng `customer_services`:

-   `reminder_sent` (boolean): ƒê√£ g·ª≠i nh·∫Øc nh·ªü hay ch∆∞a
-   `reminder_sent_at` (timestamp): Th·ªùi gian g·ª≠i nh·∫Øc nh·ªü g·∫ßn nh·∫•t
-   `reminder_count` (integer): S·ªë l·∫ßn ƒë√£ nh·∫Øc nh·ªü
-   `reminder_notes` (text): Ghi ch√∫ v·ªÅ c√°c l·∫ßn nh·∫Øc nh·ªü

## C√°c L·ªánh Qu·∫£n L√Ω

### 1. Xem B√°o C√°o Tr·∫°ng Th√°i

```bash
# Xem b√°o c√°o d·ªãch v·ª• s·∫Øp h·∫øt h·∫°n trong 5 ng√†y (m·∫∑c ƒë·ªãnh)
php artisan reminder:report

# Xem b√°o c√°o v·ªõi s·ªë ng√†y t√πy ch·ªânh
php artisan reminder:report --days=3

# Reset t·∫•t c·∫£ tr·∫°ng th√°i nh·∫Øc nh·ªü
php artisan reminder:report --reset
```

**B√°o c√°o bao g·ªìm:**

-   T·ªïng quan s·ªë l∆∞·ª£ng
-   Danh s√°ch chi ti·∫øt nh·ªØng ai ch∆∞a ƒë∆∞·ª£c nh·∫Øc
-   Danh s√°ch chi ti·∫øt nh·ªØng ai ƒë√£ ƒë∆∞·ª£c nh·∫Øc
-   Th·ªëng k√™ theo s·ªë ng√†y c√≤n l·∫°i

### 2. G·ª≠i Nh·∫Øc Nh·ªü

```bash
# G·ª≠i nh·∫Øc nh·ªü cho d·ªãch v·ª• s·∫Øp h·∫øt h·∫°n trong 5 ng√†y (m·∫∑c ƒë·ªãnh)
php artisan reminder:send-expiration

# T√πy ch·ªânh s·ªë ng√†y
php artisan reminder:send-expiration --days=3

# Ch·ªâ ƒë√°nh d·∫•u, kh√¥ng g·ª≠i th·ª±c t·∫ø (ƒë·ªÉ test)
php artisan reminder:send-expiration --mark-only

# G·ª≠i cho t·∫•t c·∫£, k·ªÉ c·∫£ ƒë√£ g·ª≠i tr∆∞·ªõc ƒë√≥
php artisan reminder:send-expiration --force
```

**L∆∞u √Ω:** Hi·ªán t·∫°i l·ªánh ch·ªâ ƒë√°nh d·∫•u tr·∫°ng th√°i. ƒê·ªÉ g·ª≠i email/SMS th·ª±c t·∫ø, b·∫°n c·∫ßn t√≠ch h·ª£p th√™m logic g·ª≠i.

### 3. Backup D·ªØ Li·ªáu

```bash
# Backup v·ªõi t√™n m·∫∑c ƒë·ªãnh (timestamp)
php artisan backup:customers

# Backup v·ªõi t√™n t√πy ch·ªânh
php artisan backup:customers --name="truoc-khi-cap-nhat"
```

### 4. Restore D·ªØ Li·ªáu

```bash
# Restore t·ª´ backup m·ªõi nh·∫•t
php artisan db:seed --class=RestoreCustomersSeeder
```

## V√≠ D·ª• S·ª≠ D·ª•ng

### Quy Tr√¨nh H√†ng Ng√†y

1. **Ki·ªÉm tra t√¨nh h√¨nh:**

    ```bash
    php artisan reminder:report
    ```

2. **G·ª≠i nh·∫Øc nh·ªü cho nh·ªØng ai ch∆∞a ƒë∆∞·ª£c nh·∫Øc:**

    ```bash
    php artisan reminder:send-expiration --mark-only
    ```

3. **Backup ƒë·ªãnh k·ª≥:**
    ```bash
    php artisan backup:customers --name="daily-$(date +%Y%m%d)"
    ```

### Quy Tr√¨nh Test

1. **Reset ƒë·ªÉ test:**

    ```bash
    php artisan reminder:report --reset
    ```

2. **G·ª≠i nh·∫Øc nh·ªü cho m·ªôt nh√≥m nh·ªè:**

    ```bash
    php artisan reminder:send-expiration --days=2 --mark-only
    ```

3. **Ki·ªÉm tra k·∫øt qu·∫£:**
    ```bash
    php artisan reminder:report
    ```

## T√≠ch H·ª£p G·ª≠i Email/SMS

ƒê·ªÉ g·ª≠i nh·∫Øc nh·ªü th·ª±c t·∫ø, b·∫°n c√≥ th·ªÉ:

1. **T·∫°o Mailable class:**

    ```bash
    php artisan make:mail ExpirationReminder
    ```

2. **S·ª≠a file `SendExpirationReminders.php`:**

    ```php
    // Thay d√≤ng n√†y:
    $service->markAsReminded('G·ª≠i nh·∫Øc nh·ªü qua command');

    // B·∫±ng:
    Mail::to($service->customer->email)->send(new ExpirationReminder($service));
    $service->markAsReminded('G·ª≠i email nh·∫Øc nh·ªü');
    ```

## Ph∆∞∆°ng Th·ª©c H·ªØu √çch Trong Model

```php
// Ki·ªÉm tra c·∫ßn nh·∫Øc l·∫°i kh√¥ng (sau 24h)
$service->needsReminderAgain();

// ƒê√°nh d·∫•u ƒë√£ nh·∫Øc v·ªõi ghi ch√∫
$service->markAsReminded('ƒê√£ g·ªçi ƒëi·ªán nh·∫Øc nh·ªü');

// Reset tr·∫°ng th√°i nh·∫Øc nh·ªü
$service->resetReminderStatus();

// L·∫•y d·ªãch v·ª• s·∫Øp h·∫øt h·∫°n ch∆∞a ƒë∆∞·ª£c nh·∫Øc
CustomerService::expiringSoonNotReminded(5)->get();

// L·∫•y d·ªãch v·ª• ƒë√£ ƒë∆∞·ª£c nh·∫Øc nh·ªü
CustomerService::reminded()->get();
```

## Ghi Ch√∫ Quan Tr·ªçng

-   H·ªá th·ªëng t·ª± ƒë·ªông t√≠nh to√°n kh√°ch h√†ng c·∫ßn nh·∫Øc l·∫°i sau 24h n·∫øu v·∫´n s·∫Øp h·∫øt h·∫°n
-   Backup bao g·ªìm t·∫•t c·∫£ th√¥ng tin nh·∫Øc nh·ªü v√† th·ªëng k√™
-   Restore s·∫Ω kh√¥i ph·ª•c c·∫£ tr·∫°ng th√°i nh·∫Øc nh·ªü n·∫øu c√≥ trong backup
-   C√≥ th·ªÉ t√πy ch·ªânh s·ªë ng√†y "s·∫Øp h·∫øt h·∫°n" cho t·ª´ng t√¨nh hu·ªëng kh√°c nhau

## Qu·∫£n L√Ω T√†i Kho·∫£n D√πng Chung

### 1. Trang Danh S√°ch T√†i Kho·∫£n D√πng Chung

**ƒê∆∞·ªùng d·∫´n:** `/admin/shared-accounts`

**C√°ch truy c·∫≠p:** T·ª´ trang qu·∫£n l√Ω d·ªãch v·ª• kh√°ch h√†ng ‚Üí N√∫t "T√†i kho·∫£n d√πng chung"

**T√≠nh nƒÉng:**

-   **Th·ªëng k√™ t·ªïng quan**:

    -   S·ªë l∆∞·ª£ng t√†i kho·∫£n d√πng chung
    -   T·ªïng s·ªë d·ªãch v·ª• trong t√†i kho·∫£n d√πng chung
    -   S·ªë t√†i kho·∫£n c√≥ v·∫•n ƒë·ªÅ (nhi·ªÅu kh√°ch h√†ng)
    -   S·ªë d·ªãch v·ª• s·∫Øp h·∫øt h·∫°n trong t√†i kho·∫£n d√πng chung

-   **B·ªô l·ªçc n√¢ng cao**:

    -   L·ªçc t√†i kho·∫£n c√≥ v·∫•n ƒë·ªÅ
    -   L·ªçc theo s·ªë l∆∞·ª£ng kh√°ch h√†ng t·ªëi thi·ªÉu
    -   S·∫Øp x·∫øp theo s·ªë d·ªãch v·ª•, s·ªë kh√°ch h√†ng, s·ªë d·ªãch v·ª• h·∫øt h·∫°n

-   **C·∫£nh b√°o tr·ª±c quan**:

    -   üü° **D√≤ng v√†ng**: T√†i kho·∫£n c√≥ nhi·ªÅu kh√°ch h√†ng d√πng chung
    -   üî¥ **D√≤ng ƒë·ªè**: T√†i kho·∫£n c√≥ d·ªãch v·ª• ƒë√£ h·∫øt h·∫°n
    -   ‚ö†Ô∏è **Badge c·∫£nh b√°o**: Hi·ªÉn th·ªã "Nhi·ªÅu kh√°ch h√†ng" khi c√≥ > 1 ng∆∞·ªùi d√πng

-   **Th√¥ng tin hi·ªÉn th·ªã**:
    -   Email t√†i kho·∫£n
    -   T·ªïng s·ªë d·ªãch v·ª• s·ª≠ d·ª•ng email n√†y
    -   S·ªë kh√°ch h√†ng kh√°c nhau
    -   S·ªë d·ªãch v·ª• ƒëang ho·∫°t ƒë·ªông/h·∫øt h·∫°n/s·∫Øp h·∫øt h·∫°n
    -   Tr·∫°ng th√°i t·ªïng th·ªÉ c·ªßa t√†i kho·∫£n

### 2. Trang Chi Ti·∫øt T√†i Kho·∫£n D√πng Chung

**ƒê∆∞·ªùng d·∫´n:** `/admin/shared-accounts/{email}`

**T√≠nh nƒÉng:**

-   **Th·ªëng k√™ chi ti·∫øt cho email**:

    -   T·ªïng s·ªë d·ªãch v·ª•
    -   S·ªë kh√°ch h√†ng s·ª≠ d·ª•ng
    -   Ph√¢n lo·∫°i theo tr·∫°ng th√°i (ho·∫°t ƒë·ªông/h·∫øt h·∫°n/s·∫Øp h·∫øt h·∫°n)

-   **Danh s√°ch d·ªãch v·ª• chi ti·∫øt**:

    -   Th√¥ng tin kh√°ch h√†ng v√† li√™n h·ªá
    -   G√≥i d·ªãch v·ª• ƒëang s·ª≠ d·ª•ng
    -   **M·∫≠t kh·∫©u c√≥ th·ªÉ ·∫©n/hi·ªán**: Click n√∫t m·∫Øt ƒë·ªÉ xem m·∫≠t kh·∫©u
    -   Ng√†y k√≠ch ho·∫°t v√† h·∫øt h·∫°n
    -   Tr·∫°ng th√°i nh·∫Øc nh·ªü
    -   Ng∆∞·ªùi ph√¢n c√¥ng d·ªãch v·ª•

-   **C·∫£nh b√°o ƒë·∫∑c bi·ªát**:

    -   Hi·ªÉn th·ªã c·∫£nh b√°o n·ªïi b·∫≠t khi c√≥ nhi·ªÅu kh√°ch h√†ng d√πng chung
    -   Highlight c√°c d·ªãch v·ª• h·∫øt h·∫°n/s·∫Øp h·∫øt h·∫°n

-   **Thao t√°c nhanh**:

    -   Xem th√¥ng tin kh√°ch h√†ng
    -   ƒê√°nh d·∫•u nh·∫Øc nh·ªü cho d·ªãch v·ª• s·∫Øp h·∫øt h·∫°n
    -   G·ª≠i email tr·ª±c ti·∫øp cho kh√°ch h√†ng

-   **Th√¥ng tin h·ªó tr·ª£**:
    -   Ghi ch√∫ quan tr·ªçng v·ªÅ r·ªßi ro d√πng chung
    -   Danh s√°ch li√™n h·ªá t·∫•t c·∫£ kh√°ch h√†ng s·ª≠ d·ª•ng email n√†y

### 3. Trang B√°o C√°o T√†i Kho·∫£n D√πng Chung

**ƒê∆∞·ªùng d·∫´n:** `/admin/shared-accounts/report`

**T√≠nh nƒÉng:**

-   **Th·ªëng k√™ t·ªïng quan to√†n h·ªá th·ªëng**:

    -   T·ªïng s·ªë d·ªãch v·ª• c√≥ email ƒëƒÉng nh·∫≠p
    -   S·ªë email duy nh·∫•t trong h·ªá th·ªëng
    -   S·ªë email ƒë∆∞·ª£c d√πng chung (>1 d·ªãch v·ª•)
    -   S·ªë email c√≥ v·∫•n ƒë·ªÅ (>1 kh√°ch h√†ng)

-   **Top 10 t√†i kho·∫£n d√πng chung nhi·ªÅu nh·∫•t**:

    -   X·∫øp h·∫°ng v·ªõi icon ü•áü•àü•â
    -   Hi·ªÉn th·ªã s·ªë d·ªãch v·ª•, s·ªë kh√°ch h√†ng
    -   Ph√¢n lo·∫°i ho·∫°t ƒë·ªông/h·∫øt h·∫°n

-   **Danh s√°ch t√†i kho·∫£n c√≥ v·∫•n ƒë·ªÅ**:

    -   Email ƒë∆∞·ª£c s·ª≠ d·ª•ng b·ªüi nhi·ªÅu kh√°ch h√†ng kh√°c nhau
    -   ƒê√°nh gi√° m·ª©c ƒë·ªô r·ªßi ro (Cao/Trung b√¨nh/Th·∫•p)
    -   T√™n t·∫•t c·∫£ kh√°ch h√†ng ƒëang s·ª≠ d·ª•ng
    -   Khuy·∫øn ngh·ªã x·ª≠ l√Ω c·ª• th·ªÉ

-   **Bi·ªÉu ƒë·ªì th·ªëng k√™ tr·ª±c quan**:

    -   Bi·ªÉu ƒë·ªì tr√≤n: Ph√¢n b·ªë email ri√™ng vs d√πng chung
    -   Bi·ªÉu ƒë·ªì t·ª∑ l·ªá: M·ª©c ƒë·ªô r·ªßi ro trong h·ªá th·ªëng

-   **T√≠nh nƒÉng in b√°o c√°o**: H·ªó tr·ª£ in b√°o c√°o v·ªõi ƒë·ªãnh d·∫°ng chuy√™n nghi·ªáp

## Commands H·ªó Tr·ª£

### Commands hi·ªán c√≥:

```bash
# G·ª≠i nh·∫Øc nh·ªü d·ªãch v·ª• s·∫Øp h·∫øt h·∫°n
php artisan reminders:send

# T·∫°o b√°o c√°o nh·∫Øc nh·ªü
php artisan reminders:report

# Backup d·ªØ li·ªáu kh√°ch h√†ng
php artisan backup:customers

# Restore d·ªØ li·ªáu t·ª´ backup
php artisan db:seed --class=RestoreCustomersSeeder

# T·∫°o d·ªØ li·ªáu test cho d·ªãch v·ª• k√≠ch ho·∫°t h√¥m nay
php artisan test:create-today-data

# T·∫°o d·ªØ li·ªáu test cho t√†i kho·∫£n d√πng chung
php artisan test:create-shared-accounts
```

### Quy tr√¨nh x·ª≠ l√Ω t√†i kho·∫£n d√πng chung:

1. **Ph√°t hi·ªán v·∫•n ƒë·ªÅ**:

    - Truy c·∫≠p `/admin/shared-accounts`
    - S·ª≠ d·ª•ng filter "T√†i kho·∫£n c√≥ v·∫•n ƒë·ªÅ"

2. **Ph√¢n t√≠ch chi ti·∫øt**:

    - Click "Chi ti·∫øt" ƒë·ªÉ xem th√¥ng tin c·ª• th·ªÉ
    - Ki·ªÉm tra s·ªë kh√°ch h√†ng v√† tr·∫°ng th√°i d·ªãch v·ª•

3. **X·ª≠ l√Ω**:

    - **T√°ch ri√™ng**: Li√™n h·ªá kh√°ch h√†ng t·∫°o t√†i kho·∫£n ri√™ng
    - **Qu·∫£n l√Ω chung**: Thi·∫øt l·∫≠p quy t·∫Øc s·ª≠ d·ª•ng r√µ r√†ng

4. **Theo d√µi**: S·ª≠ d·ª•ng b√°o c√°o ƒë·ªÉ theo d√µi xu h∆∞·ªõng

### M·ª©c ƒë·ªô ∆∞u ti√™n x·ª≠ l√Ω t√†i kho·∫£n d√πng chung:

üî¥ **∆Øu ti√™n cao** (X·ª≠ l√Ω ngay):

-   T√†i kho·∫£n c√≥ ‚â•5 kh√°ch h√†ng
-   C√≥ d·ªãch v·ª• ƒë√£ h·∫øt h·∫°n
-   C√≥ khi·∫øu n·∫°i t·ª´ kh√°ch h√†ng

üü° **∆Øu ti√™n trung b√¨nh** (X·ª≠ l√Ω trong tu·∫ßn):

-   T√†i kho·∫£n c√≥ 3-4 kh√°ch h√†ng
-   C√≥ d·ªãch v·ª• s·∫Øp h·∫øt h·∫°n
-   Ch∆∞a c√≥ quy t·∫Øc r√µ r√†ng

üü¢ **∆Øu ti√™n th·∫•p** (Theo d√µi):

-   T√†i kho·∫£n c√≥ 2 kh√°ch h√†ng
-   ƒêang ho·∫°t ƒë·ªông b√¨nh th∆∞·ªùng
-   C√≥ th·ªèa thu·∫≠n r√µ r√†ng
