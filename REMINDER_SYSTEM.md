# Há»‡ Thá»‘ng Quáº£n LÃ½ Nháº¯c Nhá»Ÿ vÃ  TÃ i Khoáº£n DÃ¹ng Chung

## Tá»•ng Quan

Há»‡ thá»‘ng nÃ y bao gá»“m hai pháº§n chÃ­nh:

1. **Quáº£n lÃ½ nháº¯c nhá»Ÿ khÃ¡ch hÃ ng sáº¯p háº¿t háº¡n**: Theo dÃµi vÃ  quáº£n lÃ½ viá»‡c nháº¯c nhá»Ÿ khÃ¡ch hÃ ng cÃ³ dá»‹ch vá»¥ sáº¯p háº¿t háº¡n
2. **Quáº£n lÃ½ tÃ i khoáº£n dÃ¹ng chung**: Theo dÃµi vÃ  kiá»ƒm soÃ¡t cÃ¡c tÃ i khoáº£n dá»‹ch vá»¥ Ä‘Æ°á»£c sá»­ dá»¥ng bá»Ÿi nhiá»u khÃ¡ch hÃ ng

### CÃ¡c tÃ­nh nÄƒng chÃ­nh:

**Pháº§n Nháº¯c Nhá»Ÿ:**

-   **ÄÃ¡nh dáº¥u tráº¡ng thÃ¡i nháº¯c nhá»Ÿ**: Theo dÃµi ai Ä‘Ã£ Ä‘Æ°á»£c nháº¯c vÃ  ai chÆ°a
-   **Giao diá»‡n web trá»±c quan**: Quáº£n lÃ½ trá»±c tiáº¿p tá»« trang admin
-   **Thá»‘ng kÃª chi tiáº¿t**: BÃ¡o cÃ¡o tá»•ng quan vá» tÃ¬nh tráº¡ng nháº¯c nhá»Ÿ
-   **Quáº£n lÃ½ linh hoáº¡t**: CÃ³ thá»ƒ reset, backup vÃ  restore dá»¯ liá»‡u
-   **Ghi chÃº nháº¯c nhá»Ÿ**: LÆ°u láº¡i lá»‹ch sá»­ vÃ  ghi chÃº cho má»—i láº§n nháº¯c

**Pháº§n TÃ i Khoáº£n DÃ¹ng Chung:**

-   **Theo dÃµi tÃ i khoáº£n Ä‘a ngÆ°á»i dÃ¹ng**: PhÃ¡t hiá»‡n email Ä‘Æ°á»£c sá»­ dá»¥ng bá»Ÿi nhiá»u khÃ¡ch hÃ ng
-   **Cáº£nh bÃ¡o xung Ä‘á»™t**: Cáº£nh bÃ¡o khi cÃ³ rá»§i ro xung Ä‘á»™t tÃ i khoáº£n
-   **BÃ¡o cÃ¡o chi tiáº¿t**: Thá»‘ng kÃª top tÃ i khoáº£n dÃ¹ng chung vÃ  má»©c Ä‘á»™ rá»§i ro
-   **Quáº£n lÃ½ máº­t kháº©u**: Hiá»ƒn thá»‹/áº©n máº­t kháº©u an toÃ n
-   **PhÃ¢n tÃ­ch xu hÆ°á»›ng**: Biá»ƒu Ä‘á»“ vÃ  thá»‘ng kÃª trá»±c quan

## Giao Diá»‡n Web

### 1. Trang Quáº£n LÃ½ Dá»‹ch Vá»¥ KhÃ¡ch HÃ ng

**ÄÆ°á»ng dáº«n:** `/admin/customer-services`

**TÃ­nh nÄƒng má»›i:**

-   **Sáº¯p xáº¿p thÃ´ng minh**:

    -   Dá»‹ch vá»¥ sáº¯p háº¿t háº¡n Ä‘Æ°á»£c Æ°u tiÃªn lÃªn Ä‘áº§u
    -   Trong cÃ¹ng nhÃ³m sáº¯p háº¿t háº¡n: gáº§n háº¿t háº¡n nháº¥t lÃªn trÆ°á»›c
    -   ChÆ°a Ä‘Æ°á»£c nháº¯c nhá»Ÿ sáº½ lÃªn trÆ°á»›c Ä‘Ã£ nháº¯c

-   **Cáº£nh bÃ¡o trá»±c quan**:

    -   ğŸš¨ **DÃ²ng Ä‘á»**: Dá»‹ch vá»¥ háº¿t háº¡n trong 0-1 ngÃ y (Cáº¤P BÃC!)
    -   âš ï¸ **DÃ²ng vÃ ng**: Dá»‹ch vá»¥ háº¿t háº¡n trong 2 ngÃ y
    -   ğŸ“‹ **ThÃ´ng bÃ¡o Ä‘áº§u trang**: Hiá»ƒn thá»‹ sá»‘ lÆ°á»£ng dá»‹ch vá»¥ cáº¥p bÃ¡ch

-   **Cá»™t "Nháº¯c nhá»Ÿ"**: Hiá»ƒn thá»‹ tráº¡ng thÃ¡i nháº¯c nhá»Ÿ cho tá»«ng dá»‹ch vá»¥

    -   âœ… **ÄÃ£ nháº¯c**: Sá»‘ láº§n nháº¯c + thá»i gian nháº¯c gáº§n nháº¥t
    -   âš ï¸ **Cáº§n nháº¯c láº¡i**: Hiá»ƒn thá»‹ khi Ä‘Ã£ nháº¯c nhÆ°ng cáº§n nháº¯c láº¡i sau 24h
    -   âŒ **ChÆ°a nháº¯c**: Äá»‘i vá»›i dá»‹ch vá»¥ sáº¯p háº¿t háº¡n chÆ°a Ä‘Æ°á»£c nháº¯c

-   **NÃºt thao tÃ¡c má»›i:**
    -   ğŸ”” **ÄÃ¡nh dáº¥u nháº¯c nhá»Ÿ**: Cho dá»‹ch vá»¥ sáº¯p háº¿t háº¡n chÆ°a Ä‘Æ°á»£c nháº¯c
    -   â†©ï¸ **Reset nháº¯c nhá»Ÿ**: Reset tráº¡ng thÃ¡i nháº¯c nhá»Ÿ

### 2. Trang BÃ¡o CÃ¡o Nháº¯c Nhá»Ÿ

**ÄÆ°á»ng dáº«n:** `/admin/customer-services-reminder-report`

**TÃ­nh nÄƒng:**

-   **Thá»‘ng kÃª tá»•ng quan**:

    -   Tá»•ng sá»‘ dá»‹ch vá»¥ sáº¯p háº¿t háº¡n
    -   Sá»‘ lÆ°á»£ng Ä‘Ã£/chÆ°a nháº¯c nhá»Ÿ
    -   Tá»· lá»‡ % Ä‘Ã£ nháº¯c nhá»Ÿ

-   **Bá»™ lá»c thá»i gian**: 3, 5, 7, 10 ngÃ y tá»›i

-   **Danh sÃ¡ch chi tiáº¿t:**

    -   **Cáº§n nháº¯c nhá»Ÿ**: Danh sÃ¡ch dá»‹ch vá»¥ chÆ°a Ä‘Æ°á»£c nháº¯c
    -   **ÄÃ£ nháº¯c nhá»Ÿ**: Danh sÃ¡ch dá»‹ch vá»¥ Ä‘Ã£ Ä‘Æ°á»£c nháº¯c vá»›i tráº¡ng thÃ¡i

-   **Thao tÃ¡c hÃ ng loáº¡t:**
    -   Chá»n nhiá»u dá»‹ch vá»¥ vÃ  Ä‘Ã¡nh dáº¥u cÃ¹ng lÃºc
    -   ÄÃ¡nh dáº¥u táº¥t cáº£ chÆ°a Ä‘Æ°á»£c nháº¯c

### 3. BÃ¡o CÃ¡o Thá»‘ng KÃª HÃ ng NgÃ y

**ÄÆ°á»ng dáº«n:** `/admin/customer-services-daily-report`

**TÃ­nh nÄƒng:**

-   **Thá»‘ng kÃª tá»•ng quan theo ngÃ y:**

    -   Sá»‘ dá»‹ch vá»¥ kÃ­ch hoáº¡t + doanh thu Æ°á»›c tÃ­nh
    -   Sá»‘ dá»‹ch vá»¥ háº¿t háº¡n (cáº§n gia háº¡n)
    -   Sá»‘ dá»‹ch vá»¥ sáº¯p háº¿t háº¡n trong 5 ngÃ y

-   **Chi tiáº¿t dá»‹ch vá»¥ kÃ­ch hoáº¡t:**

    -   Danh sÃ¡ch khÃ¡ch hÃ ng kÃ­ch hoáº¡t dá»‹ch vá»¥
    -   Top gÃ³i dá»‹ch vá»¥ phá»• biáº¿n
    -   Doanh thu theo tá»«ng gÃ³i

-   **Chi tiáº¿t dá»‹ch vá»¥ háº¿t háº¡n:**

    -   Danh sÃ¡ch khÃ¡ch hÃ ng cáº§n liÃªn há»‡ gia háº¡n
    -   ThÃ´ng tin liÃªn há»‡ vÃ  thao tÃ¡c nhanh

-   **Bá»™ lá»c ngÃ y:** CÃ³ thá»ƒ xem bÃ¡o cÃ¡o cho báº¥t ká»³ ngÃ y nÃ o

### 4. NÃºt Truy Cáº­p Nhanh

-   **Tá»« Dashboard**: Truy cáº­p nhanh tá»›i dá»‹ch vá»¥ sáº¯p háº¿t háº¡n
-   **Tá»« menu**: Menu "Dá»‹ch vá»¥ khÃ¡ch hÃ ng"
    -   "BÃ¡o cÃ¡o hÃ ng ngÃ y" - Xem thá»‘ng kÃª tá»•ng quan
    -   "BÃ¡o cÃ¡o nháº¯c nhá»Ÿ" - Quáº£n lÃ½ nháº¯c nhá»Ÿ

### 5. Bá»™ Lá»c NÃ¢ng Cao

**Tráº¡ng thÃ¡i dá»‹ch vá»¥:**

-   Äang hoáº¡t Ä‘á»™ng, Sáº¯p háº¿t háº¡n, ÄÃ£ háº¿t háº¡n

**Nháº¯c nhá»Ÿ:**

-   Sáº¯p háº¿t háº¡n - ChÆ°a nháº¯c
-   ÄÃ£ Ä‘Æ°á»£c nháº¯c nhá»Ÿ

**NgÃ y kÃ­ch hoáº¡t:**

-   ğŸ¯ **KÃ­ch hoáº¡t hÃ´m nay** - Xem khÃ¡ch hÃ ng má»›i + thá»‘ng kÃª
-   KÃ­ch hoáº¡t hÃ´m qua
-   KÃ­ch hoáº¡t tuáº§n nÃ y
-   KÃ­ch hoáº¡t thÃ¡ng nÃ y

## Quy TrÃ¬nh Sá»­ Dá»¥ng HÃ ng NgÃ y

### 1. Kiá»ƒm Tra Doanh Sá»‘ HÃ´m Nay

```
1. VÃ o "Dá»‹ch vá»¥ khÃ¡ch hÃ ng" â†’ Filter "ğŸ¯ KÃ­ch hoáº¡t hÃ´m nay"
2. Xem thá»‘ng kÃª: Tá»•ng dá»‹ch vá»¥, khÃ¡ch hÃ ng, doanh thu
3. Hoáº·c vÃ o "BÃ¡o cÃ¡o hÃ ng ngÃ y" Ä‘á»ƒ xem chi tiáº¿t Ä‘áº§y Ä‘á»§
```

### 2. Quáº£n LÃ½ Nháº¯c Nhá»Ÿ

```
1. VÃ o "BÃ¡o cÃ¡o nháº¯c nhá»Ÿ"
2. Xem danh sÃ¡ch chÆ°a Ä‘Æ°á»£c nháº¯c
3. ÄÃ¡nh dáº¥u hÃ ng loáº¡t hoáº·c tá»«ng khÃ¡ch
```

### 3. Theo DÃµi Háº¿t Háº¡n

```
1. VÃ o "BÃ¡o cÃ¡o hÃ ng ngÃ y"
2. Xem má»¥c "Dá»‹ch vá»¥ háº¿t háº¡n hÃ´m nay"
3. LiÃªn há»‡ khÃ¡ch hÃ ng gia háº¡n
```

## Tá»•ng Quan

Há»‡ thá»‘ng nÃ y cho phÃ©p báº¡n theo dÃµi vÃ  quáº£n lÃ½ viá»‡c nháº¯c nhá»Ÿ khÃ¡ch hÃ ng cÃ³ dá»‹ch vá»¥ sáº¯p háº¿t háº¡n. Bao gá»“m:

-   **ÄÃ¡nh dáº¥u tráº¡ng thÃ¡i nháº¯c nhá»Ÿ**: Theo dÃµi ai Ä‘Ã£ Ä‘Æ°á»£c nháº¯c vÃ  ai chÆ°a
-   **Thá»‘ng kÃª chi tiáº¿t**: BÃ¡o cÃ¡o tá»•ng quan vá» tÃ¬nh tráº¡ng nháº¯c nhá»Ÿ
-   **Quáº£n lÃ½ linh hoáº¡t**: CÃ³ thá»ƒ reset, backup vÃ  restore dá»¯ liá»‡u
-   **Ghi chÃº nháº¯c nhá»Ÿ**: LÆ°u láº¡i lá»‹ch sá»­ vÃ  ghi chÃº cho má»—i láº§n nháº¯c

## CÃ¡c TrÆ°á»ng Dá»¯ Liá»‡u Má»›i

ÄÃ£ thÃªm vÃ o báº£ng `customer_services`:

-   `reminder_sent` (boolean): ÄÃ£ gá»­i nháº¯c nhá»Ÿ hay chÆ°a
-   `reminder_sent_at` (timestamp): Thá»i gian gá»­i nháº¯c nhá»Ÿ gáº§n nháº¥t
-   `reminder_count` (integer): Sá»‘ láº§n Ä‘Ã£ nháº¯c nhá»Ÿ
-   `reminder_notes` (text): Ghi chÃº vá» cÃ¡c láº§n nháº¯c nhá»Ÿ

## CÃ¡c Lá»‡nh Quáº£n LÃ½

### 1. Xem BÃ¡o CÃ¡o Tráº¡ng ThÃ¡i

```bash
# Xem bÃ¡o cÃ¡o dá»‹ch vá»¥ sáº¯p háº¿t háº¡n trong 5 ngÃ y (máº·c Ä‘á»‹nh)
php artisan reminder:report

# Xem bÃ¡o cÃ¡o vá»›i sá»‘ ngÃ y tÃ¹y chá»‰nh
php artisan reminder:report --days=3

# Reset táº¥t cáº£ tráº¡ng thÃ¡i nháº¯c nhá»Ÿ
php artisan reminder:report --reset
```

**BÃ¡o cÃ¡o bao gá»“m:**

-   Tá»•ng quan sá»‘ lÆ°á»£ng
-   Danh sÃ¡ch chi tiáº¿t nhá»¯ng ai chÆ°a Ä‘Æ°á»£c nháº¯c
-   Danh sÃ¡ch chi tiáº¿t nhá»¯ng ai Ä‘Ã£ Ä‘Æ°á»£c nháº¯c
-   Thá»‘ng kÃª theo sá»‘ ngÃ y cÃ²n láº¡i

### 2. Gá»­i Nháº¯c Nhá»Ÿ

```bash
# Gá»­i nháº¯c nhá»Ÿ cho dá»‹ch vá»¥ sáº¯p háº¿t háº¡n trong 5 ngÃ y (máº·c Ä‘á»‹nh)
php artisan reminder:send-expiration

# TÃ¹y chá»‰nh sá»‘ ngÃ y
php artisan reminder:send-expiration --days=3

# Chá»‰ Ä‘Ã¡nh dáº¥u, khÃ´ng gá»­i thá»±c táº¿ (Ä‘á»ƒ test)
php artisan reminder:send-expiration --mark-only

# Gá»­i cho táº¥t cáº£, ká»ƒ cáº£ Ä‘Ã£ gá»­i trÆ°á»›c Ä‘Ã³
php artisan reminder:send-expiration --force
```

**LÆ°u Ã½:** Hiá»‡n táº¡i lá»‡nh chá»‰ Ä‘Ã¡nh dáº¥u tráº¡ng thÃ¡i. Äá»ƒ gá»­i email/SMS thá»±c táº¿, báº¡n cáº§n tÃ­ch há»£p thÃªm logic gá»­i.

### 3. Backup Dá»¯ Liá»‡u

```bash
# Backup vá»›i tÃªn máº·c Ä‘á»‹nh (timestamp)
php artisan backup:customers

# Backup vá»›i tÃªn tÃ¹y chá»‰nh
php artisan backup:customers --name="truoc-khi-cap-nhat"
```

### 4. Restore Dá»¯ Liá»‡u

```bash
# Restore tá»« backup má»›i nháº¥t
php artisan db:seed --class=RestoreCustomersSeeder
```

## VÃ­ Dá»¥ Sá»­ Dá»¥ng

### Quy TrÃ¬nh HÃ ng NgÃ y

1. **Kiá»ƒm tra tÃ¬nh hÃ¬nh:**

    ```bash
    php artisan reminder:report
    ```

2. **Gá»­i nháº¯c nhá»Ÿ cho nhá»¯ng ai chÆ°a Ä‘Æ°á»£c nháº¯c:**

    ```bash
    php artisan reminder:send-expiration --mark-only
    ```

3. **Backup Ä‘á»‹nh ká»³:**
    ```bash
    php artisan backup:customers --name="daily-$(date +%Y%m%d)"
    ```

### Quy TrÃ¬nh Test

1. **Reset Ä‘á»ƒ test:**

    ```bash
    php artisan reminder:report --reset
    ```

2. **Gá»­i nháº¯c nhá»Ÿ cho má»™t nhÃ³m nhá»:**

    ```bash
    php artisan reminder:send-expiration --days=2 --mark-only
    ```

3. **Kiá»ƒm tra káº¿t quáº£:**
    ```bash
    php artisan reminder:report
    ```

## TÃ­ch Há»£p Gá»­i Email/SMS

Äá»ƒ gá»­i nháº¯c nhá»Ÿ thá»±c táº¿, báº¡n cÃ³ thá»ƒ:

1. **Táº¡o Mailable class:**

    ```bash
    php artisan make:mail ExpirationReminder
    ```

2. **Sá»­a file `SendExpirationReminders.php`:**

    ```php
    // Thay dÃ²ng nÃ y:
    $service->markAsReminded('Gá»­i nháº¯c nhá»Ÿ qua command');

    // Báº±ng:
    Mail::to($service->customer->email)->send(new ExpirationReminder($service));
    $service->markAsReminded('Gá»­i email nháº¯c nhá»Ÿ');
    ```

## PhÆ°Æ¡ng Thá»©c Há»¯u Ãch Trong Model

```php
// Kiá»ƒm tra cáº§n nháº¯c láº¡i khÃ´ng (sau 24h)
$service->needsReminderAgain();

// ÄÃ¡nh dáº¥u Ä‘Ã£ nháº¯c vá»›i ghi chÃº
$service->markAsReminded('ÄÃ£ gá»i Ä‘iá»‡n nháº¯c nhá»Ÿ');

// Reset tráº¡ng thÃ¡i nháº¯c nhá»Ÿ
$service->resetReminderStatus();

// Láº¥y dá»‹ch vá»¥ sáº¯p háº¿t háº¡n chÆ°a Ä‘Æ°á»£c nháº¯c
CustomerService::expiringSoonNotReminded(5)->get();

// Láº¥y dá»‹ch vá»¥ Ä‘Ã£ Ä‘Æ°á»£c nháº¯c nhá»Ÿ
CustomerService::reminded()->get();
```

## Ghi ChÃº Quan Trá»ng

-   Há»‡ thá»‘ng tá»± Ä‘á»™ng tÃ­nh toÃ¡n khÃ¡ch hÃ ng cáº§n nháº¯c láº¡i sau 24h náº¿u váº«n sáº¯p háº¿t háº¡n
-   Backup bao gá»“m táº¥t cáº£ thÃ´ng tin nháº¯c nhá»Ÿ vÃ  thá»‘ng kÃª
-   Restore sáº½ khÃ´i phá»¥c cáº£ tráº¡ng thÃ¡i nháº¯c nhá»Ÿ náº¿u cÃ³ trong backup
-   CÃ³ thá»ƒ tÃ¹y chá»‰nh sá»‘ ngÃ y "sáº¯p háº¿t háº¡n" cho tá»«ng tÃ¬nh huá»‘ng khÃ¡c nhau

## Quáº£n LÃ½ TÃ i Khoáº£n DÃ¹ng Chung

### 1. Trang Danh SÃ¡ch TÃ i Khoáº£n DÃ¹ng Chung

**ÄÆ°á»ng dáº«n:** `/admin/shared-accounts`

**CÃ¡ch truy cáº­p:** Tá»« trang quáº£n lÃ½ dá»‹ch vá»¥ khÃ¡ch hÃ ng â†’ NÃºt "TÃ i khoáº£n dÃ¹ng chung"

**TÃ­nh nÄƒng:**

-   **Thá»‘ng kÃª tá»•ng quan**:

    -   Sá»‘ lÆ°á»£ng tÃ i khoáº£n dÃ¹ng chung
    -   Tá»•ng sá»‘ dá»‹ch vá»¥ trong tÃ i khoáº£n dÃ¹ng chung
    -   Sá»‘ tÃ i khoáº£n cÃ³ váº¥n Ä‘á» (nhiá»u khÃ¡ch hÃ ng)
    -   Sá»‘ dá»‹ch vá»¥ sáº¯p háº¿t háº¡n trong tÃ i khoáº£n dÃ¹ng chung

-   **Bá»™ lá»c nÃ¢ng cao**:

    -   Lá»c tÃ i khoáº£n cÃ³ váº¥n Ä‘á»
    -   Lá»c theo sá»‘ lÆ°á»£ng khÃ¡ch hÃ ng tá»‘i thiá»ƒu
    -   Sáº¯p xáº¿p theo sá»‘ dá»‹ch vá»¥, sá»‘ khÃ¡ch hÃ ng, sá»‘ dá»‹ch vá»¥ háº¿t háº¡n

-   **Cáº£nh bÃ¡o trá»±c quan**:

    -   ğŸŸ¡ **DÃ²ng vÃ ng**: TÃ i khoáº£n cÃ³ nhiá»u khÃ¡ch hÃ ng dÃ¹ng chung
    -   ğŸ”´ **DÃ²ng Ä‘á»**: TÃ i khoáº£n cÃ³ dá»‹ch vá»¥ Ä‘Ã£ háº¿t háº¡n
    -   âš ï¸ **Badge cáº£nh bÃ¡o**: Hiá»ƒn thá»‹ "Nhiá»u khÃ¡ch hÃ ng" khi cÃ³ > 1 ngÆ°á»i dÃ¹ng

-   **ThÃ´ng tin hiá»ƒn thá»‹**:
    -   Email tÃ i khoáº£n
    -   Tá»•ng sá»‘ dá»‹ch vá»¥ sá»­ dá»¥ng email nÃ y
    -   Sá»‘ khÃ¡ch hÃ ng khÃ¡c nhau
    -   Sá»‘ dá»‹ch vá»¥ Ä‘ang hoáº¡t Ä‘á»™ng/háº¿t háº¡n/sáº¯p háº¿t háº¡n
    -   Tráº¡ng thÃ¡i tá»•ng thá»ƒ cá»§a tÃ i khoáº£n

### 2. Trang Chi Tiáº¿t TÃ i Khoáº£n DÃ¹ng Chung

**ÄÆ°á»ng dáº«n:** `/admin/shared-accounts/{email}`

**TÃ­nh nÄƒng:**

-   **Thá»‘ng kÃª chi tiáº¿t cho email**:

    -   Tá»•ng sá»‘ dá»‹ch vá»¥
    -   Sá»‘ khÃ¡ch hÃ ng sá»­ dá»¥ng
    -   PhÃ¢n loáº¡i theo tráº¡ng thÃ¡i (hoáº¡t Ä‘á»™ng/háº¿t háº¡n/sáº¯p háº¿t háº¡n)

-   **Danh sÃ¡ch dá»‹ch vá»¥ chi tiáº¿t**:

    -   ThÃ´ng tin khÃ¡ch hÃ ng vÃ  liÃªn há»‡
    -   GÃ³i dá»‹ch vá»¥ Ä‘ang sá»­ dá»¥ng
    -   **Máº­t kháº©u cÃ³ thá»ƒ áº©n/hiá»‡n**: Click nÃºt máº¯t Ä‘á»ƒ xem máº­t kháº©u
    -   NgÃ y kÃ­ch hoáº¡t vÃ  háº¿t háº¡n
    -   Tráº¡ng thÃ¡i nháº¯c nhá»Ÿ
    -   NgÆ°á»i phÃ¢n cÃ´ng dá»‹ch vá»¥

-   **Cáº£nh bÃ¡o Ä‘áº·c biá»‡t**:

    -   Hiá»ƒn thá»‹ cáº£nh bÃ¡o ná»•i báº­t khi cÃ³ nhiá»u khÃ¡ch hÃ ng dÃ¹ng chung
    -   Highlight cÃ¡c dá»‹ch vá»¥ háº¿t háº¡n/sáº¯p háº¿t háº¡n

-   **Thao tÃ¡c nhanh**:

    -   Xem thÃ´ng tin khÃ¡ch hÃ ng
    -   ÄÃ¡nh dáº¥u nháº¯c nhá»Ÿ cho dá»‹ch vá»¥ sáº¯p háº¿t háº¡n
    -   Gá»­i email trá»±c tiáº¿p cho khÃ¡ch hÃ ng

-   **ThÃ´ng tin há»— trá»£**:
    -   Ghi chÃº quan trá»ng vá» rá»§i ro dÃ¹ng chung
    -   Danh sÃ¡ch liÃªn há»‡ táº¥t cáº£ khÃ¡ch hÃ ng sá»­ dá»¥ng email nÃ y

### 3. Trang BÃ¡o CÃ¡o TÃ i Khoáº£n DÃ¹ng Chung

**ÄÆ°á»ng dáº«n:** `/admin/shared-accounts/report`

**TÃ­nh nÄƒng:**

-   **Thá»‘ng kÃª tá»•ng quan toÃ n há»‡ thá»‘ng**:

    -   Tá»•ng sá»‘ dá»‹ch vá»¥ cÃ³ email Ä‘Äƒng nháº­p
    -   Sá»‘ email duy nháº¥t trong há»‡ thá»‘ng
    -   Sá»‘ email Ä‘Æ°á»£c dÃ¹ng chung (>1 dá»‹ch vá»¥)
    -   Sá»‘ email cÃ³ váº¥n Ä‘á» (>1 khÃ¡ch hÃ ng)

-   **Top 10 tÃ i khoáº£n dÃ¹ng chung nhiá»u nháº¥t**:

    -   Xáº¿p háº¡ng vá»›i icon ğŸ¥‡ğŸ¥ˆğŸ¥‰
    -   Hiá»ƒn thá»‹ sá»‘ dá»‹ch vá»¥, sá»‘ khÃ¡ch hÃ ng
    -   PhÃ¢n loáº¡i hoáº¡t Ä‘á»™ng/háº¿t háº¡n

-   **Danh sÃ¡ch tÃ i khoáº£n cÃ³ váº¥n Ä‘á»**:

    -   Email Ä‘Æ°á»£c sá»­ dá»¥ng bá»Ÿi nhiá»u khÃ¡ch hÃ ng khÃ¡c nhau
    -   ÄÃ¡nh giÃ¡ má»©c Ä‘á»™ rá»§i ro (Cao/Trung bÃ¬nh/Tháº¥p)
    -   TÃªn táº¥t cáº£ khÃ¡ch hÃ ng Ä‘ang sá»­ dá»¥ng
    -   Khuyáº¿n nghá»‹ xá»­ lÃ½ cá»¥ thá»ƒ

-   **Biá»ƒu Ä‘á»“ thá»‘ng kÃª trá»±c quan**:

    -   Biá»ƒu Ä‘á»“ trÃ²n: PhÃ¢n bá»‘ email riÃªng vs dÃ¹ng chung
    -   Biá»ƒu Ä‘á»“ tá»· lá»‡: Má»©c Ä‘á»™ rá»§i ro trong há»‡ thá»‘ng

-   **TÃ­nh nÄƒng in bÃ¡o cÃ¡o**: Há»— trá»£ in bÃ¡o cÃ¡o vá»›i Ä‘á»‹nh dáº¡ng chuyÃªn nghiá»‡p

## Commands Há»— Trá»£

### Commands hiá»‡n cÃ³:

```bash
# Gá»­i nháº¯c nhá»Ÿ dá»‹ch vá»¥ sáº¯p háº¿t háº¡n
php artisan reminders:send

# Táº¡o bÃ¡o cÃ¡o nháº¯c nhá»Ÿ
php artisan reminders:report

# Backup dá»¯ liá»‡u khÃ¡ch hÃ ng
php artisan backup:customers

# Restore dá»¯ liá»‡u tá»« backup
php artisan db:seed --class=RestoreCustomersSeeder

# Táº¡o dá»¯ liá»‡u test cho dá»‹ch vá»¥ kÃ­ch hoáº¡t hÃ´m nay
php artisan test:create-today-data

# Táº¡o dá»¯ liá»‡u test cho tÃ i khoáº£n dÃ¹ng chung
php artisan test:create-shared-accounts
```

### Quy trÃ¬nh xá»­ lÃ½ tÃ i khoáº£n dÃ¹ng chung:

1. **PhÃ¡t hiá»‡n váº¥n Ä‘á»**:

    - Truy cáº­p `/admin/shared-accounts`
    - Sá»­ dá»¥ng filter "TÃ i khoáº£n cÃ³ váº¥n Ä‘á»"

2. **PhÃ¢n tÃ­ch chi tiáº¿t**:

    - Click "Chi tiáº¿t" Ä‘á»ƒ xem thÃ´ng tin cá»¥ thá»ƒ
    - Kiá»ƒm tra sá»‘ khÃ¡ch hÃ ng vÃ  tráº¡ng thÃ¡i dá»‹ch vá»¥

3. **Xá»­ lÃ½**:

    - **TÃ¡ch riÃªng**: LiÃªn há»‡ khÃ¡ch hÃ ng táº¡o tÃ i khoáº£n riÃªng
    - **Quáº£n lÃ½ chung**: Thiáº¿t láº­p quy táº¯c sá»­ dá»¥ng rÃµ rÃ ng

4. **Theo dÃµi**: Sá»­ dá»¥ng bÃ¡o cÃ¡o Ä‘á»ƒ theo dÃµi xu hÆ°á»›ng

### Má»©c Ä‘á»™ Æ°u tiÃªn xá»­ lÃ½ tÃ i khoáº£n dÃ¹ng chung:

ğŸ”´ **Æ¯u tiÃªn cao** (Xá»­ lÃ½ ngay):

-   TÃ i khoáº£n cÃ³ â‰¥5 khÃ¡ch hÃ ng
-   CÃ³ dá»‹ch vá»¥ Ä‘Ã£ háº¿t háº¡n
-   CÃ³ khiáº¿u náº¡i tá»« khÃ¡ch hÃ ng

ğŸŸ¡ **Æ¯u tiÃªn trung bÃ¬nh** (Xá»­ lÃ½ trong tuáº§n):

-   TÃ i khoáº£n cÃ³ 3-4 khÃ¡ch hÃ ng
-   CÃ³ dá»‹ch vá»¥ sáº¯p háº¿t háº¡n
-   ChÆ°a cÃ³ quy táº¯c rÃµ rÃ ng

ğŸŸ¢ **Æ¯u tiÃªn tháº¥p** (Theo dÃµi):

-   TÃ i khoáº£n cÃ³ 2 khÃ¡ch hÃ ng
-   Äang hoáº¡t Ä‘á»™ng bÃ¬nh thÆ°á»ng
-   CÃ³ thá»a thuáº­n rÃµ rÃ ng
